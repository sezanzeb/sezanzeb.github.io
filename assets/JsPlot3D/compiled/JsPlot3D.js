var JSPLOT3D=function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t){e.exports=THREE},function(e,t,a){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=0+o,r=.65+o;return e=(e-t)/(a-t),e=e*(1-r-(1-n))+r,new l.Color(0).setHSL(e,.95,.55)}function n(e,t,a,n,i){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,m=new Array(e.length),u=0;if(i&&(u=1),0==n&&-1!=t&&void 0==r(e[u][t])&&(console.warn("the column that is supposed to hold the color information (index "+t+') contained an unrecognized string ("'+e[0][t]+'"). "labeled" is set to '+n+', "header" is set to '+i+" Now assuming labeled = true."),n=!0),n||(d={}),-1!=t){var f=e[u][t],p=e[u][t];if(n){((e[u][t]+"").startsWith("rgb")||(e[u][t]+"").startsWith("hsl")||(e[u][t]+"").startsWith("#")&&7===e[0][t].length)&&console.warn(e[0][t]+' might be a color. "labeled" is set true. For the stored colors to show up, try "labeled=false"');for(var v=void 0,b=0;b<e.length;b++)v=e[b][t],d[v]||(d[v]={},d[v].number=h,d[v].color=null,h++);for(var g=1/h,x=0;x<m.length;x++){var y=e[x][t],M=void 0;null===d[y].color?(M=new l.Color(0).setHSL(d[y].number*g+c,.95,.55),d[y].color=M):M=d[y].color,m[x]=M}return{labelColorMap:d,dfColors:m,numberOfLabels:h}}if(isNaN(parseFloat(e[u][t]))){if(s=!1,void 0!=r(e[u][t]))for(var w=0;w<e.length;w++){var C=r(e[w][t]);C||(C=new l.Color(0)),m[w]=C}return{labelColorMap:d,dfColors:m,numberOfLabels:0}}for(var A=0;A<e.length;A++)m[A]=e[A][t],s?function(e){-1!=t&&(e>f&&(f=e),e<p&&(p=e))}(m[A]):m[A]=0|e[A][t];if(s){for(var z=0;z<e.length;z++){var D=m[z];m[z]=o(D,p,f,c)}return{labelColorMap:d,dfColors:m,numberOfLabels:0}}for(var O=0;O<e.length;O++){var S=m[O];m[O]=r(S)}return{labelColorMap:d,dfColors:m,numberOfLabels:0}}for(var k=0;k<e.length;k++)m[k]=r(a);return{labelColorMap:{},dfColors:m,numberOfLabels:0}}function r(e){if("number"==typeof e)return new l.Color(e);if("number"!=typeof e&&"string"!=typeof e)return console.error("getColorObjectFromAnyString expected String or Number as parameter but got "+(void 0===e?"undefined":i(e)));e=e.toLocaleLowerCase();var t=parseFloat(e);if(!isNaN(t))return new l.Color(t);if(e.startsWith("rgb"))return new l.Color(e);if(e.startsWith("#"))return new l.Color(e);if(e.startsWith("hsl")){var a=e.substring(4,e.length-1).split(",");return new l.Color(0).setHSL(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]))}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.convertToHeat=o,t.getColorMap=n,t.getColorObjectFromAnyString=r;var s=a(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(s)},function(e,t,a){"use strict";function o(e,t,a,o,n,r){if((0===n&&0===r||void 0===n||void 0===r)&&(n=e[0][t],r=e[0][t]),"number"!=typeof n||"number"!=typeof r)return console.error('your dataframe contained a non-number value "',n,'" at column',t,". This could be due to wrong configuration of your csv-separator, because of a corrupted dataframe or you have selected the wrong column index.");for(var i=0;i<e.length;i++)e[i][t]>r&&(r=e[i][t]),e[i][t]<n&&(n=e[i][t]);return{min:n,max:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMinMax=o},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Plot=t.COLORLIB=t.FRONTCAMERA=t.LEFTCAMERA=t.TOPCAMERA=t.DEFAULTCAMERA=t.SOM_MODE=t.POLYGON_MODE=t.LINEPLOT_MODE=t.BARCHART_MODE=t.SCATTERPLOT_MODE=t.ZAXIS=t.YAXIS=t.XAXIS=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(4),l=o(s),c=a(6),d=o(c),h=a(7),m=o(h),u=a(8),f=o(u),p=a(9),v=o(p),b=a(10),g=o(b),x=a(11),y=o(x),M=a(1),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(M),C=t.XAXIS=1,A=t.YAXIS=2,z=t.ZAXIS=3,D=t.SCATTERPLOT_MODE="scatterplot",O=t.BARCHART_MODE="barchart",S=t.LINEPLOT_MODE="lineplot",k=t.POLYGON_MODE="polygon",X=t.SOM_MODE="selforganizingmap",L=t.DEFAULTCAMERA=0,N=t.TOPCAMERA=1,E=t.LEFTCAMERA=2,P=t.FRONTCAMERA=3;t.COLORLIB=w;t.Plot=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),"object"!=(void 0===t?"undefined":r(t)))return console.error('second param for the Plot constructor (container) should be a DOM-Object. This can be obtained using e.g. document.getElementById("foobar")');this.clearOldData(),this.SceneHelper=new l.default({width:t.offsetWidth,height:t.offsetHeight}),this.setContainer(t),this.dimensions={xRes:20,zRes:20,xLen:1,yLen:1,zLen:1},this.SceneHelper.createScene(this.dimensions,a,{width:t.offsetWidth,height:t.offsetHeight}),this.SceneHelper.centerCamera(this.dimensions),this.initializeLegend(),this.benchmark={},this.benchmark.enabled=!1,this.benchmark.recentTime=0,this.plotmesh=null,this.animationFunc=null,this.fps15=0,this.SceneHelper.render()}return i(e,[{key:"plotFormula",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undefined"==typeof math)return console.error("mathjs was not found. Link the script in your html file http://mathjs.org/download.html"),void console.error("or use plotFunction(function(x1, x3) { return x1+x3; }) for example");null==t&&(t={});var o=math.compile(e);this.plotFunction(function(e,a){return t.x1=e,t.x3=a,o.eval(t)},a)}},{key:"plotFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=k,o=1,n=!0,r="function",i="1. param",s="return value",l="2. param";if(this.isAnimated()&&(t.fastForward=!0),void 0!=t.mode&&(a=t.mode),void 0!=t.x2frac&&(o=t.x2frac),void 0!=t.normalizeX2&&(n=t.normalizeX2),void 0!=t.title&&(r=t.title),void 0!=t.x1title&&(i=t.x1title),void 0!=t.x2title&&(s=t.x2title),void 0!=t.x3title&&(l=t.x3title),!e)return console.error("first param of plotFormula (foo) is undefined or empty");if(this.clearCheckString(),t.header=!1,t.title=r,t.x1title=i,t.x2title=s,t.x3title=l,a==k){this.oldData.options.mode=k;var c=0,d=3;this.checkNumber("hueOffset",t.hueOffset)&&(c=t.hueOffset),this.checkNumber("numberDensity",t.numberDensity)&&(d=t.numberDensity);var h={hueOffset:c},m={normalizeX2:n,x2frac:o},u={numberDensity:d},f=this.dimensions;this.populateLegend({x1title:i,x2title:s,x3title:l,title:r}),(0,v.default)(e,this,h,m,u,f)}else{for(var p=new Array(this.dimensions.xRes*this.dimensions.zRes),b=0,g=0,x=0;x<this.dimensions.xRes;x++)for(var y=0;y<this.dimensions.zRes;y++)g=e(x/this.dimensions.xRes,y/this.dimensions.zRes),p[b]=new Float32Array(3),p[b][0]=x/this.dimensions.xRes,p[b][1]=g,p[b][2]=y/this.dimensions.zRes,b++;t.colorCol=1,this.plotDataFrame(p,0,1,2,t)}}},{key:"plotCsvString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(""===e||!e)return console.error("dataframe arrived empty");var r=",",i="",s=1,l=!1,c=!0;this.checkNumber("fraction",n.fraction)&&(s=n.fraction),this.checkBoolean("csvIsInGoodShape",n.csvIsInGoodShape)&&(l=n.csvIsInGoodShape),this.checkBoolean("header",n.header)&&(c=n.header),void 0!=n.separator&&(r=n.separator),void 0!=n.title&&(i=n.title),this.benchmarkStamp("start");for(var d=e.length/20|0,h="",m=0;m<e.length;m+=d)h+=e[m];var u=(i+e.length+h+s+r).replace(/[\s\t\n\r]/g,"_");if(this.oldData.checkstring!=u||0==this.oldData.dataframe.length){var f=e.split(/[\n\r]+/g);if(""===f[0].trim()&&(f=f.slice(-(f.length-1))),""===f[f.length-1].trim()&&f.pop(),0===f.length)return console.error("dataframe is empty");if(s<1&&(f=f.slice(0,Math.max(Math.min(3,f.length),f.length*s))),void 0===n.separator||-1===f[0].indexOf(r)){if(r=";",-1===f[0].indexOf(r)&&(r=","),-1===f[0].indexOf(r)&&(r=/(?:[\s\t]{2,}|\t+)/g),-1===f[0].search(r))return console.error('no csv separator/delimiter was detected. Please set separator:"..." according to your file format: "'+f[0]+'"');console.warn('the specified separator/delimiter was not found. Tried to detect it and came up with "'+r+'". Please set separator ="..." according to your file format: "'+f[0]+'"')}if(void 0==n.header){var p=f[0].split(r);isNaN(parseFloat(p[t]))||isNaN(parseFloat(p[a]))||isNaN(parseFloat(p[o]))?(console.warn("detected headers"),n.header=!0,c=!0):(n.header=!1,c=!1)}if(l){var v=0;c&&(v=1);for(var b=0;b<f.length;b++)f[b]=f[b].split(r);for(var g=0;g<f[0].length;g++)if(!isNaN(parseFloat(f[v][g])))for(var x=0;x<f.length;x++)f[x][g]=parseFloat(f[x][g])}else{for(var y=0,M=0;M<Math.min(f.length,.05*f.length+10);M++)y=Math.max(y,f[M].split(r).length);for(var w=0;w<f.length;w++){f[w]=f[w].trim().split(r),f[w]=f[w].slice(0,y),f[w]=f[w].concat(new Array(y-f[w].length));for(var C=0;C<f[w].length;C++)if(void 0==f[w][C])f[w][C]=0;else{'"'===f[w][C][0]&&'"'===f[w][C][f[w][C].length-1]&&(f[w][C]=f[w][C].slice(1,-1));var A=parseFloat(f[w][C]);isNaN(A)?""===f[w][C]&&"number"==typeof f[w-1][C]?f[w][C]=0:f[w][C].trim():f[w][C]=A}}}this.oldData.checkstring=u,this.benchmarkStamp("created the dataframe and cached it"),n.fraction=1,this.plotDataFrame(f,t,a,o,n)}else console.log("using cached dataframe"),this.plotDataFrame(this.oldData.dataframe,t,a,o,n)}},{key:"plotDataFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.benchmarkStamp("plotDataFrame starts");var r=!0,i=-1,s=D,l=!0,c=!0,h=!0,u="",p=1,v=!1,b=0,x=.5,M=.04,L=!0,N="x1",E="x2",P="x3",T=0,R=!1,H=!0,F=0,j=1,_=1,V=1,I=3,U=void 0;if(n.fastForward)void 0!=n.fraction&&(p=n.fraction),void 0!=n.barchartPadding&&(x=n.barchartPadding),void 0!=n.hueOffset&&(T=n.hueOffset),void 0!=n.numberDensity&&(I=n.numberDensity),void 0!=n.x1frac&&(j=n.x1frac),void 0!=n.x2frac&&(_=n.x2frac),void 0!=n.x3frac&&(V=n.x3frac),void 0!=n.colorCol&&(i=n.colorCol),void 0!=n.dataPointSize&&(M=n.dataPointSize),void 0!=n.barSizeThreshold&&(F=n.barSizeThreshold),void 0!=n.labeled&&(v=n.labeled),void 0!=n.normalizeX1&&(l=n.normalizeX1),void 0!=n.normalizeX2&&(c=n.normalizeX2),void 0!=n.normalizeX3&&(h=n.normalizeX3),void 0!=n.header&&(r=n.header),void 0!=n.filterColor&&(L=n.filterColor),void 0!=n.keepOldPlot&&(R=n.keepOldPlot),void 0!=n.updateOldData&&(H=n.updateOldData),void 0!=n.title&&(u=n.title),void 0!=n.defaultColor&&(b=n.defaultColor),void 0!=n.mode&&(s=n.mode),void 0!=n.x1title&&(N=n.x1title),void 0!=n.x2title&&(E=n.x2title),void 0!=n.x3title&&(P=n.x3title),p<1&&(e=e.slice(0,e.length*p));else{if(""===n.colorCol&&(n.colorCol=void 0),void 0!=n.colorCol&&n.colorCol>=e[0].length&&(console.error("column with index "+n.colorCol+", used as colorCol, is not existant in the dataframe. Disabling coloration"),n.colorCol=-1),this.checkNumber("fraction",n.fraction)&&(p=n.fraction),this.checkNumber("barchartPadding",n.barchartPadding)&&(x=n.barchartPadding),this.checkNumber("hueOffset",n.hueOffset)&&(T=n.hueOffset),this.checkNumber("numberDensity",n.numberDensity)&&(I=n.numberDensity),this.checkNumber("x1frac",n.x1frac)&&(j=n.x1frac),this.checkNumber("x2frac",n.x2frac)&&(_=n.x2frac),this.checkNumber("x3frac",n.x3frac)&&(V=n.x3frac),this.checkNumber("colorCol",n.colorCol)&&(i=n.colorCol),this.checkNumber("dataPointSize",n.dataPointSize)&&(M=n.dataPointSize),this.checkNumber("barSizeThreshold",n.barSizeThreshold)&&(F=n.barSizeThreshold),M<=0&&console.error("datapoint size is <= 0. Datapoints will be invisible in scatterplot and lineplot modes"),(x>=1||x<0)&&(x=0,console.error("barchartPadding is invalid. maximum of 1 and minimum of 0 accepted. Now continuing with barchartPadding = "+x)),this.checkBoolean("labeled",n.labeled)&&(v=n.labeled),this.checkBoolean("normalizeX1",n.normalizeX1)&&(l=n.normalizeX1),this.checkBoolean("normalizeX2",n.normalizeX2)&&(c=n.normalizeX2),this.checkBoolean("normalizeX3",n.normalizeX3)&&(h=n.normalizeX3),this.checkBoolean("header",n.header)&&(r=n.header),this.checkBoolean("filterColor",n.filterColor)&&(L=n.filterColor),this.checkBoolean("keepOldPlot",n.keepOldPlot)&&(R=n.keepOldPlot),this.checkBoolean("updateOldData",n.updateOldData)&&(H=n.updateOldData),void 0!=n.title&&(u=n.title),void 0!=n.defaultColor&&(b=n.defaultColor),void 0!=n.mode&&(s=n.mode),void 0!=n.x1title&&(N=n.x1title),void 0!=n.x2title&&(E=n.x2title),void 0!=n.x3title&&(P=n.x3title),this.checkNumber("x1col",t)||(t=Math.min(0,e[0].length-1)),this.checkNumber("x2col",a)||(a=Math.min(1,e[0].length-1)),this.checkNumber("x3col",o)||(o=Math.min(2,e[0].length-1)),t>=e[0].length||a>=e[0].length||o>=e[0].length){console.error("one of the colum indices is out of bounds. The maximum index in this dataframe is "+(e[0].length-1)+". x1col: "+t+" x2col:"+a+" x3col:"+o);var B=2,G=0;for(void 0!=e[1]&&(G=1);B>=0&&isNaN(e[G][B]);B--);t=Math.min(t,B),a=Math.min(a,B),o=Math.min(o,B)}if(void 0==n.header&&("number"!=typeof e[0][t]||"number"!=typeof e[0][a]||"number"!=typeof e[0][o]?(console.warn("detected headers"),r=!0):r=!1),p<1&&(e=e.slice(0,Math.max(Math.min(3,e.length),e.length*p))),r){if(1===e.length)return console.error("dataframe is empty besides headers");U=e[0],"x1"===N&&(N=""+U[t]),"x2"===E&&(E=""+U[a]),"x3"===P&&(P=""+U[o]),e=e.slice(1,e.length)}if(0===e.length)return console.error("dataframe is empty")}this.benchmarkStamp("checked Parameters"),R||(this.oldData.labelColorMap={},this.oldData.numberOfLabels=0);var Z=void 0,Y=void 0;(s!==O||v)&&(Z=w.getColorMap(e,i,b,v,r,L,T,this.oldData.labelColorMap,this.oldData.numberOfLabels),Y=Z.dfColors,this.oldData.labelColorMap=Z.labelColorMap,this.oldData.numberOfLabels=Z.numberOfLabels),this.populateLegend({colorMap:Z,x1title:N,x2title:E,x3title:P,title:u});var W=void 0,K=void 0,Q=void 0,q=void 0,J=void 0,$=void 0;R&&this.IsPlotmeshValid(s)||(this.oldData.normalization.minX1=0,this.oldData.normalization.maxX1=0,this.oldData.normalization.minX2=0,this.oldData.normalization.maxX2=0,this.oldData.normalization.minX3=0,this.oldData.normalization.maxX3=0),l||R?(W=this.oldData.normalization.minX1,K=this.oldData.normalization.maxX1):(W=0,K=this.dimensions.xLen),c||R?(Q=this.oldData.normalization.minX2,q=this.oldData.normalization.maxX2):(Q=0,q=this.dimensions.yLen),h||R?(J=this.oldData.normalization.minX3,$=this.oldData.normalization.maxX3):(J=0,$=this.dimensions.zLen);var ee={dfColors:Y,hueOffset:T},te={x1col:t,x2col:a,x3col:o},ae={normalizeX1:l,normalizeX2:c,normalizeX3:h,x1frac:j,x2frac:_,x3frac:V,minX1:W,minX2:Q,minX3:J,maxX1:K,maxX2:q,maxX3:$},oe={keepOldPlot:R,barchartPadding:x,barSizeThreshold:F,dataPointSize:M,labeled:v},ne=this.dimensions;if(s===O?(0,f.default)(this,e,ee,te,ae,oe,this.SceneHelper.cameraMode):s===k?(0,y.default)(this,e,ee,te,ae,oe,ne):s==X?(0,g.default)(this,e,ee,te,ae,oe,ne):s===S?(0,m.default)(this,e,ee,te,ae,oe,ne):(s!==D&&console.error('mode "'+s+'" unrecognized. Assuming "scatterplot"'),(0,d.default)(this,e,ee,te,ae,oe,ne)),this.benchmarkStamp("made a plot"),l&&(W=ae.minX1,K=ae.maxX1,j=ae.x1frac),c&&(Q=ae.minX2,q=ae.maxX2,_=ae.x2frac),h&&(J=ae.minX3,$=ae.maxX3,V=ae.x3frac),this.SceneHelper.axes){var re=this.dimensions.xLen,ie=this.dimensions.yLen,se=this.dimensions.zLen;this.SceneHelper.render();var le=0==this.SceneHelper.xNumbers.children.length||this.oldData.normalization.maxX1!==K||this.oldData.normalization.minX1!==W,ce=0==this.SceneHelper.yNumbers.children.length||this.oldData.normalization.maxX2!==q||this.oldData.normalization.minX2!==Q,de=0==this.SceneHelper.zNumbers.children.length||this.oldData.normalization.maxX3!==$||this.oldData.normalization.minX3!==J;if(this.oldData.normalization={},this.oldData.normalization.minX1=W,this.oldData.normalization.maxX1=K,this.oldData.normalization.minX2=Q,this.oldData.normalization.maxX2=q,this.oldData.normalization.minX3=J,this.oldData.normalization.maxX3=$,this.oldData.numberDensity=I,0===this.fps15){if(le&&this.SceneHelper.updateNumbersAlongAxis(I,re,C,W,K,null!==this.animationFunc),ce){var he=Q,me=ie;s===O&&(he=0,me=ie*(q-he)/_),this.SceneHelper.updateNumbersAlongAxis(I,me,A,he,q,null!==this.animationFunc)}de&&this.SceneHelper.updateNumbersAlongAxis(I,se,z,J,$,null!==this.animationFunc)}}else this.oldData.normalization={},this.oldData.normalization.minX1=W,this.oldData.normalization.maxX1=K,this.oldData.normalization.minX2=Q,this.oldData.normalization.maxX2=q,this.oldData.normalization.minX3=J,this.oldData.normalization.maxX3=$;this.SceneHelper.render(),this.oldData.options.mode=s,this.oldData.normalization.x1frac=j,this.oldData.normalization.x2frac=_,this.oldData.normalization.x3frac=V,!0===H&&(this.oldData.dataframe=void 0!=U?[U].concat(e):e,this.oldData.x1col=t,this.oldData.x2col=a,this.oldData.x3col=o,n.header=r,this.oldData.options=n),this.SceneHelper.makeSureItRenders(this.animationFunc)}},{key:"addDataPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.oldData.options.mode==k)return console.error("the current plot is a",k,"which is only the case for formulas. You can't add datapoints to formulas");for(var a in this.oldData.options)void 0===t[a]&&(t[a]=this.oldData.options[a]);if(t.header=!1,t.updateOldData=!1,this.isAnimated()&&(t.fastForward=!0),void 0===t.normalizeX1&&(t.normalizeX1=!1),void 0===t.normalizeX2&&(t.normalizeX2=!1),void 0===t.normalizeX3&&(t.normalizeX3=!1),void 0===t.keepOldPlot&&(t.keepOldPlot=!0),"string"==typeof e){e=e.split(t.separator);for(var o=0;o<e.length;o++)e[o]=e[o].trim()}if(this.oldData.dataframe[this.oldData.dataframe.length]=e,e.length!=this.oldData.dataframe[0].length)return console.error("the new datapoint does not match the number of column in the in oldData stored dataframe ("+e.length+" != "+this.oldData.dataframe[0].length+")");this.plotDataFrame([e],this.oldData.x1col,this.oldData.x2col,this.oldData.x3col,t),this.oldData.checkstring+="_addDP"}},{key:"populateLegend",value:function(e){var t="";if(e.title&&""!=e.title&&(t+="<h1>"+e.title+"</h1>"),e.colorMap&&e.colorMap.labelColorMap!={}){t+='<table class ="jsP3D_labelColorLegend"><tbody>';for(var a in e.colorMap.labelColorMap)t+="<tr>",t+='<td><span class ="jsP3D_labelColor" style ="background-color:#'+e.colorMap.labelColorMap[a].color.getHexString()+';"></span></td>',t+="<td>"+a+"</td>",t+="</tr>";t+="</tbody></table>"}t+='<table class ="jsP3D_axesTitleLegend"><tbody>',this.SceneHelper.cameraMode!=E&&e.x1title&&(t+="<tr><td>x:</td><td>"+e.x1title+"</td></tr>"),this.SceneHelper.cameraMode!=N&&e.x2title&&(t+="<tr><td>y:</td><td>"+e.x2title+"</td></tr>"),this.SceneHelper.cameraMode!=P&&e.x3title&&(t+="<tr><td>z:</td><td>"+e.x3title+"</td></tr>"),t+="</tbody></table>",this.legend.element.innerHTML.trim()!=t&&(this.legend.element.innerHTML=t)}},{key:"initializeLegend",value:function(){this.legend={},this.legend.element=document.createElement("div"),this.legend.element.className="jsP3D_legend",this.legend.title="",this.legend.x1title="",this.legend.x2title="",this.legend.x3title=""}},{key:"createLegend",value:function(e){return null===e?console.error("container for createLegend not found"):(e.appendChild(this.legend.element),this.legend.element)}},{key:"IsPlotmeshValid",value:function(e){var t=this.plotmesh;return null!==t&&(t.name===e||t.type===e)}},{key:"disposePlotMesh",value:function(){this.SceneHelper.disposeMesh(this.plotmesh),this.plotmesh=null}},{key:"clearOldData",value:function(){this.oldData={},this.oldData.normalization={minX1:0,maxX1:0,minX2:0,maxX2:0,minX3:0,maxX3:0},this.oldData.labelColorMap={},this.oldData.numberOfLabels=0,this.oldData.material=null,this.oldData.dataframe=[],this.oldData.x1col=0,this.oldData.x2col=1,this.oldData.x3col=2,this.clearCheckString(),this.oldData.barsGrid=null,this.oldData.options={},this.oldData.options.mode=D}},{key:"clearCheckString",value:function(){this.oldData.checkstring=""}},{key:"setContainer",value:function(e){if("object"!=(void 0===e?"undefined":r(e)))return console.error('param of setContainer (container) should be a DOM-Object. This can be obtained using e.g. document.getElementById("foobar")');this.container=e,this.SceneHelper.renderer.setSize(e.offsetWidth,e.offsetHeight),this.container.appendChild(this.SceneHelper.renderer.domElement)}},{key:"setDimensions",value:function(e){return"object"!=(void 0===e?"undefined":r(e))?console.error("param of setDimensions (dimensions) should be a json object containing at least one of xRes, zRes, xLen, yLen or zLen"):(this.disposePlotMesh(),this.clearOldData(),0===e.xLen&&0===e.yLen?console.error("only one dimension can be zero",e):0===e.yLen&&0===e.zLen?console.error("only one dimension can be zero",e):0===e.zLen&&0===e.xLen?console.error("only one dimension can be zero",e):(0===e.xLen?(e.xLen=.001,e.xRes=1,this.SceneHelper.changeCameraMode(E)):0===e.yLen?(e.yLen=.001,e.yRes=1,this.SceneHelper.changeCameraMode(N)):0===e.zLen?(e.zLen=.001,e.zRes=1,this.SceneHelper.changeCameraMode(P)):this.SceneHelper.changeCameraMode(L),e.xRes&&(this.dimensions.xRes=Math.max(1,Math.abs(0|e.xRes))),e.zRes&&(this.dimensions.zRes=Math.max(1,Math.abs(0|e.zRes))),e.xLen&&(this.dimensions.xLen=Math.abs(e.xLen)),e.yLen&&(this.dimensions.yLen=Math.abs(e.yLen)),e.zLen&&(this.dimensions.zLen=Math.abs(e.zLen)),this.SceneHelper.centerCamera(this.dimensions),this.SceneHelper.updateAxesSize(this.dimensions,this.oldData.normalization),void this.SceneHelper.render()))}},{key:"animate",value:function(e){this.SceneHelper.onChangeCamera=function(){},this.animationFunc=e,this.callAnimation()}},{key:"isAnimated",value:function(){return null!=this.animationFunc}},{key:"stopAnimation",value:function(){this.animationFunc=null,this.fps15=0}},{key:"callAnimation",value:function(){var e=this;null!==this.animationFunc&&(this.animationFunc(),this.SceneHelper.render()),requestAnimationFrame(function(){return e.callAnimation()}),this.fps15+=1,this.fps15=this.fps15%4}},{key:"enableBenchmarking",value:function(){this.benchmark={},this.benchmark.enabled=!0,this.benchmark.recentTime=window.performance.now()}},{key:"disableBenchmarking",value:function(){this.benchmark.enabled=!1}},{key:"benchmarkStamp",value:function(e){!1!==this.benchmark.enabled&&(console.log(e+": "+(window.performance.now()-this.benchmark.recentTime)+"ms"),this.benchmark.recentTime=window.performance.now())}},{key:"setBackgroundColor",value:function(e){this.SceneHelper.setBackgroundColor(e)}},{key:"setAxesColor",value:function(e){this.SceneHelper.createAxes(e,this.dimensions,this.oldData.normalization),this.SceneHelper.makeSureItRenders(this.animationFunc)}},{key:"centerCamera",value:function(){this.SceneHelper.centerCamera(this.dimensions)}},{key:"removeAxes",value:function(){this.SceneHelper.removeAxes()}},{key:"errorParamType",value:function(e,t,a){console.error("expected '"+a+"' but found '"+(void 0===t?"undefined":r(t))+"' for "+e+" ("+t+")")}},{key:"checkBoolean",value:function(e,t){if(void 0!=t){var a=!0===t||!1===t;return a||this.errorParamType(e,t,"boolean"),a}}},{key:"checkNumber",value:function(e,t){if(void 0!=t&&""!==t)return"number"==typeof t||!isNaN(parseFloat(t))||this.errorParamType(e,t,"number")}}]),e}()},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),s=a(0),l=o(s),c=a(1),d=o(c),h=a(5),m=function(e){return e&&e.__esModule?e:{default:e}}(h),u=function(){function e(){n(this,e),this.renderer=new l.WebGLRenderer({antialias:!0}),this.recentlyUsedNormalization=null,this.recentlyUsedDimensions=null,this.textScale=1/7,this.cameraMode=0,this.xNumbers=new l.Group,this.xNumbers.name="xNumbers",this.yNumbers=new l.Group,this.yNumbers.name="yNumbers",this.zNumbers=new l.Group,this.zNumbers.name="zNumbers"}return i(e,[{key:"createScene",value:function(e,t,a){var o=16777215,n=0;this.width=a.width,this.height=a.height,void 0!=t.backgroundColor&&(o=t.backgroundColor),void 0!=t.axesColor&&(n=t.axesColor),this.scene=new l.Scene,this.createArcCamera(),this.setBackgroundColor(o),this.createLight(),this.createAxes(n,e)}},{key:"centerCamera",value:function(e){var t=e.xLen,a=e.yLen,o=e.zLen,n=80/this.camera.fov;"OrthographicCamera"===this.camera.type&&(n=1);var r=void 0,i=void 0,s=void 0;0===this.cameraMode?(r=n*(t/2),i=n*Math.max(o,a),s=n*(o+t)):1===this.cameraMode?(r=t/2,i=2*Math.max(t,o),s=o/2,this.camera.initial_y=i):2===this.cameraMode?(r=2*-Math.max(a,o),i=a/2,s=o/2,this.camera.initial_x=r):3===this.cameraMode&&(r=t/2,i=a/2,s=2*Math.max(t,a),this.camera.initial_z=s),this.camera.position.set(r,i,s),this.cameraControls.target.set(t/2,a/2,o/2),this.camera.lookAt(this.cameraControls.target),this.render()}},{key:"changeCameraMode",value:function(e){this.cameraMode!=e&&(this.cameraControls.dispose(),1===e?(this.createSideViewCamera("y"),this.createAxes(this.axesColor,this.dimensions,this.normalization)):2===e?(this.createSideViewCamera("x"),this.createAxes(this.axesColor,this.dimensions,this.normalization)):3===e?(this.createSideViewCamera("z"),this.createAxes(this.axesColor,this.dimensions,this.normalization)):this.createArcCamera(),this.cameraMode=e,this.render())}},{key:"createSideViewCamera",value:function(e){var t=this,a=this.width,o=this.height,n=Math.min(a,o),r=new l.OrthographicCamera(-a/n,a/n,o/n,-o/n,0,50),i=new((0,m.default)(l))(r,this.renderer.domElement);i.enableKeys=!1,this.onChangeCamera=this.render,i.addEventListener("change",function(){t.camera.position[e]=t.camera["initial_"+e]/t.camera.zoom,t.render()}),i.enableDamping=!0,i.dampingFactor=.25,i.enableZoom=!0,i.enableRotate=!1,this.camera=r,this.cameraControls=i}},{key:"createArcCamera",value:function(){var e=this,t=this.width,a=this.height,o=t/a,n=new l.PerspectiveCamera(40,o,.05,50),r=new((0,m.default)(l))(n,this.renderer.domElement);r.enableKeys=!1,this.onChangeCamera=this.render,r.addEventListener("change",function(){return e.render()}),r.enableDamping=!0,r.dampingFactor=.25,r.enableZoom=!0,r.rotateSpeed=.3,r.enableRotate=!0,this.camera=n,this.cameraControls=r}},{key:"createLight",value:function(){var e=new l.DirectionalLight(16750899,1);e.position.y=1,e.name="lightFromTop",this.scene.add(e);var t=new l.DirectionalLight(13158,1.5);t.position.y=-1,t.name="lightFromBottom",this.scene.add(t);var a=new l.HemisphereLight(16777215,5264736,1.2);this.scene.add(a)}},{key:"removeAxes",value:function(){this.disposeMesh(this.axes),this.disposeMesh(this.gridHelper),this.axes=null,this.gridHelper=null}},{key:"placeLetter",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e=""+e;var n=this.createLetterTexture(e,a),r=new l.Geometry;r.vertices.push(new l.Vector3(0,0,0));var i=new l.Points(r,new l.PointsMaterial({map:n,depthTest:!0,sizeAttenuation:!1,size:n.image.width*this.textScale*o,transparent:!0}));return i.position.set(t.x,t.y,t.z),i.renderOrder=Number.MAX_SAFE_INTEGER,i.name="sprite_"+e,i}},{key:"createLetterTexture",value:function(e,t){e=""+e;var a=document.createElement("canvas");a.width=64*Math.pow(2,2+(0|Math.log2(e.length))),a.height=a.width;var o=a.getContext("2d"),n=this.axesColor.getHSL().l;if(o.fillStyle="#"+this.axesColor.getHexString(),n>.4)o.strokeStyle="rgba(0,0,0,0.8)",o.miterLimit=1,o.lineWidth=10;else{this.backgroundColor.getHSL().l<.4&&(o.strokeStyle="rgba(255,255,255,0.8)",o.miterLimit=1,o.lineWidth=10)}return o.font="Bold 80px sans-serif",o.textAlign=t,o.strokeText(e,a.width/2,a.height/2+20),o.fillText(e,a.width/2,a.height/2+20),new l.CanvasTexture(a)}},{key:"updateLetterTextureOnSprite",value:function(e,t,a){t=""+t,e.material.map.dispose(),e.material.map=this.createLetterTexture(t,a),e.material.size=e.material.map.image.width*this.textScale,e.material.needsUpdate=!0}},{key:"updateNumbersAlongAxis",value:function(e,t,a,o,n){if(this.axes){var r=["xNumbers","yNumbers","zNumbers"][a-1],i=this[r],s=void 0,c=void 0;1==this.cameraMode?(s=[function(e){return new l.Vector3(e,.075,-.075)},function(){return new l.Vector3(0,0,0)},function(e){return new l.Vector3(-.075,.075,e)}][a-1],c=["center","right","right"][a-1]):2==this.cameraMode?(s=[function(){return new l.Vector3(0,0,0)},function(e){return new l.Vector3(-.075,e,-.0375)},function(e){return new l.Vector3(-.075,-.075,e)}][a-1],c=["center","right","center"][a-1]):3==this.cameraMode?(s=[function(e){return new l.Vector3(e,-.075,-.075)},function(e){return new l.Vector3(-.075,e,-.0375)},function(){return new l.Vector3(0,0,0)}][a-1],c=["center","right","right"][a-1]):(s=[function(e){return new l.Vector3(e,.075,-.075)},function(e){return new l.Vector3(-.075,e,-.0375)},function(e){return new l.Vector3(-.075,.075,e)}][a-1],c=["center","right","right"][a-1]);var d=e*t|0;i.children.length!=d&&(this.disposeMesh(i),this[r]=new l.Group,this[r].name=r,i=this[r]);for(var h=i.children,m=0,u=t/d,f=u;f<=t;f+=u){var p=(n-o)/d*(m+1)+o;if(void 0==h[m]||h[m].originalNumber!==p){var v=p.toPrecision(3),b=s(f);if(h.length-1<m){var g=this.placeLetter(v,b,c);g.originalNumber=p,i.add(g)}else this.updateLetterTextureOnSprite(h[m],v,c),h[m].originalNumber=p,h[m].position.set(b.x,b.y,b.z);m++}}return this.axes.add(i),i}}},{key:"updateAxesSize",value:function(e,t){null!==this.axes&&(this.disposeAllAxesNumbers(),this.createAxes(this.axesColor,e,t))}},{key:"disposeAllAxesNumbers",value:function(){null!==this.axes&&(this.disposeMesh(this.xNumbers),this.disposeMesh(this.yNumbers),this.disposeMesh(this.zNumbers),this.xNumbers=new l.Group,this.xNumbers.name="xNumbers",this.yNumbers=new l.Group,this.yNumbers.name="yNumbers",this.zNumbers=new l.Group,this.zNumbers.name="zNumbers")}},{key:"createAxes",value:function(e,t,a){this.dimensions=t,this.normalization=a,this.disposeMesh(this.axes);var o=t.xLen,n=t.yLen,i=t.zLen,s=2!=this.cameraMode&&0!=t.xRes,c=1!=this.cameraMode&&0!=t.yRes,h=3!=this.cameraMode&&0!=t.zRes,m=new l.Group,u=void 0;"object"===(void 0===e?"undefined":r(e))&&void 0!=e.r?u=e:void 0===(u=d.getColorObjectFromAnyString(e))&&(console.warn("unrecognized color",e,"assuming black"),u=new l.Color(0)),void 0!=u?e=u:(e=new l.Color(0),console.error("unrecognized color",e)),this.axesColor=u;var f=new l.Geometry,p=new l.Vector3(0,0,0),v=new l.Vector3(1.1*o,0,0),b=new l.Vector3(0,1.1*n,0),g=new l.Vector3(0,0,1.1*i);f.vertices.push(p),f.vertices.push(v),f.vertices.push(b),f.vertices.push(g),f.faces.push(new l.Face3(0,0,1)),f.faces.push(new l.Face3(0,0,2)),f.faces.push(new l.Face3(0,0,3));var x=new l.MeshBasicMaterial({color:e,wireframe:!0,side:l.DoubleSide}),y=new l.Mesh(f,x);y.name="axesWire",m.add(y);var M=new l.MeshBasicMaterial({color:e}),w=new l.ConeGeometry(.02,.066,12);if(s){var C=new l.Mesh(w,M);C.rotateZ(-Math.PI/2),C.position.set(1.1*o,0,0),C.name="xArrow",m.add(C)}if(c){var A=new l.Mesh(w,M);A.position.set(0,1.1*n,0),A.name="yArrow",m.add(A)}if(h){var z=new l.Mesh(w,M);z.rotateX(Math.PI/2),z.position.set(0,0,1.1*i),z.name="zArrow",m.add(z)}if(s){var D=void 0;D=this.placeLetter("x",new l.Vector3(1.1*o+.1,0,0),"center",1.3),m.add(D)}if(c){var O=void 0;O=this.placeLetter("y",new l.Vector3(0,1.1*n+.1,0),"center",1.3),m.add(O)}if(h){var S=void 0;S=this.placeLetter("z",new l.Vector3(0,0,1.1*i+.1),"center",1.3),m.add(S)}var k=new l.GridHelper(1,3,u,u);k.geometry.translate(.5,0,.5),1===this.cameraMode?(k.geometry.scale(t.xLen,1,t.zLen),k.geometry.translate(0,-.1,0)):2===this.cameraMode?(k.geometry.scale(t.yLen,1,t.zLen),k.geometry.rotateZ(Math.PI/2),k.geometry.translate(.1,0,0)):3===this.cameraMode?(k.geometry.scale(t.xLen,1,t.yLen),k.geometry.rotateX(-Math.PI/2),k.geometry.translate(0,0,-.1)):k.geometry.scale(t.xLen,1,t.zLen),k.material.transparent=!0,k.material.opacity=.2,m.add(k),this.axes=m,m.name="axesGroup",m.dimensions=t,m.normalization=a,this.scene.add(m)}},{key:"disposeMesh",value:function(e){if(e){if(e.geometry&&e.geometry.dispose(),e.material&&(!e.material.length&&e.material&&e.material.dispose(),!isNaN(e.material.length)))for(var t=0;t<e.material.length;t++)e.material[t].dispose();e.texture&&e.texture.dispose();for(var a=0;a<e.children.length;a++)this.disposeMesh(e.children[a]);null!==e.parent&&e.parent.remove(e),e.remove()}}},{key:"makeSureItRenders",value:function(e){var t=this;if(null===e){for(var a=0;a<5;a++)window.setTimeout(function(){return t.render()},100+33*a);for(var o=0;o<5;o++)window.setTimeout(function(){return t.render()},265+66*o)}}},{key:"setBackgroundColor",value:function(e){var t=d.getColorObjectFromAnyString(e);void 0===t&&(console.warn("unrecognized color",e,"assuming white"),t=new l.Color(16777215)),this.backgroundColor=t,this.renderer.setClearColor(t),this.render()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}();t.default=u},function(e,t){e.exports=function(e){function t(t,a){function o(){return 2*Math.PI/60/60*P.autoRotateSpeed}function n(){return Math.pow(.95,P.zoomSpeed)}function r(e){I.theta-=e}function i(e){I.phi-=e}function s(t){P.object instanceof e.PerspectiveCamera?U/=t:P.object instanceof e.OrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom*t)),P.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function l(t){P.object instanceof e.PerspectiveCamera?U*=t:P.object instanceof e.OrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom/t)),P.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function c(e){Z.set(e.clientX,e.clientY)}function d(e){J.set(e.clientX,e.clientY)}function h(e){K.set(e.clientX,e.clientY)}function m(e){Y.set(e.clientX,e.clientY),W.subVectors(Y,Z);var t=P.domElement===document?P.domElement.body:P.domElement;r(2*Math.PI*W.x/t.clientWidth*P.rotateSpeed),i(2*Math.PI*W.y/t.clientHeight*P.rotateSpeed),Z.copy(Y),P.update()}function u(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?s(n()):ee.y<0&&l(n()),J.copy($),P.update()}function f(e){Q.set(e.clientX,e.clientY),q.subVectors(Q,K),oe(q.x,q.y),K.copy(Q),P.update()}function p(e){}function v(e){e.deltaY<0?l(n()):e.deltaY>0&&s(n()),P.update()}function b(e){switch(e.keyCode){case P.keys.UP:oe(0,P.keyPanSpeed),P.update();break;case P.keys.BOTTOM:oe(0,-P.keyPanSpeed),P.update();break;case P.keys.LEFT:oe(P.keyPanSpeed,0),P.update();break;case P.keys.RIGHT:oe(-P.keyPanSpeed,0),P.update()}}function g(e){Z.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+a*a);J.set(0,o)}function y(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function M(e){Y.set(e.touches[0].pageX,e.touches[0].pageY),W.subVectors(Y,Z);var t=P.domElement===document?P.domElement.body:P.domElement;r(2*Math.PI*W.x/t.clientWidth*P.rotateSpeed),i(2*Math.PI*W.y/t.clientHeight*P.rotateSpeed),Z.copy(Y),P.update()}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+a*a);$.set(0,o),ee.subVectors($,J),ee.y>0?l(n()):ee.y<0&&s(n()),J.copy($),P.update()}function C(e){Q.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(Q,K),oe(q.x,q.y),K.copy(Q),P.update()}function A(e){}function z(e){if(!1!==P.enabled){if(e.preventDefault(),e.button===P.mouseButtons.ORBIT){if(!1===P.enableRotate)return;c(e),j=F.ROTATE}else if(e.button===P.mouseButtons.ZOOM){if(!1===P.enableZoom)return;d(e),j=F.DOLLY}else if(e.button===P.mouseButtons.PAN){if(!1===P.enablePan)return;h(e),j=F.PAN}j!==F.NONE&&(document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",O,!1),P.dispatchEvent(R))}}function D(e){if(!1!==P.enabled)if(e.preventDefault(),j===F.ROTATE){if(!1===P.enableRotate)return;m(e)}else if(j===F.DOLLY){if(!1===P.enableZoom)return;u(e)}else if(j===F.PAN){if(!1===P.enablePan)return;f(e)}}function O(e){!1!==P.enabled&&(p(e),document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",O,!1),P.dispatchEvent(H),j=F.NONE)}function S(e){!1===P.enabled||!1===P.enableZoom||j!==F.NONE&&j!==F.ROTATE||(e.preventDefault(),e.stopPropagation(),v(e),P.dispatchEvent(R),P.dispatchEvent(H))}function k(e){!1!==P.enabled&&!1!==P.enableKeys&&!1!==P.enablePan&&b(e)}function X(e){if(!1!==P.enabled){switch(e.touches.length){case 1:if(!1===P.enableRotate)return;g(e),j=F.TOUCH_ROTATE;break;case 2:if(!1===P.enableZoom)return;x(e),j=F.TOUCH_DOLLY;break;case 3:if(!1===P.enablePan)return;y(e),j=F.TOUCH_PAN;break;default:j=F.NONE}j!==F.NONE&&P.dispatchEvent(R)}}function L(e){if(!1!==P.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===P.enableRotate)return;if(j!==F.TOUCH_ROTATE)return;M(e);break;case 2:if(!1===P.enableZoom)return;if(j!==F.TOUCH_DOLLY)return;w(e);break;case 3:if(!1===P.enablePan)return;if(j!==F.TOUCH_PAN)return;C(e);break;default:j=F.NONE}}function N(e){!1!==P.enabled&&(A(e),P.dispatchEvent(H),j=F.NONE)}function E(e){e.preventDefault()}this.object=t,this.domElement=void 0!==a?a:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){P.target.copy(P.target0),P.object.position.copy(P.position0),P.object.zoom=P.zoom0,P.object.updateProjectionMatrix(),P.dispatchEvent(T),P.update(),j=F.NONE},this.update=function(){var a=new e.Vector3,n=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),i=n.clone().inverse(),s=new e.Vector3,l=new e.Quaternion;return function(){var e=P.object.position;return a.copy(e).sub(P.target),a.applyQuaternion(n),V.setFromVector3(a),P.autoRotate&&j===F.NONE&&r(o()),V.theta+=I.theta,V.phi+=I.phi,V.theta=Math.max(P.minAzimuthAngle,Math.min(P.maxAzimuthAngle,V.theta)),V.phi=Math.max(P.minPolarAngle,Math.min(P.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=U,V.radius=Math.max(P.minDistance,Math.min(P.maxDistance,V.radius)),P.target.add(B),a.setFromSpherical(V),a.applyQuaternion(i),e.copy(P.target).add(a),P.object.lookAt(P.target),!0===P.enableDamping?(I.theta*=1-P.dampingFactor,I.phi*=1-P.dampingFactor):I.set(0,0,0),U=1,B.set(0,0,0),!!(G||s.distanceToSquared(P.object.position)>_||8*(1-l.dot(P.object.quaternion))>_)&&(P.dispatchEvent(T),s.copy(P.object.position),l.copy(P.object.quaternion),G=!1,!0)}}(),this.dispose=function(){P.domElement.removeEventListener("contextmenu",E,!1),P.domElement.removeEventListener("mousedown",z,!1),P.domElement.removeEventListener("wheel",S,!1),P.domElement.removeEventListener("touchstart",X,!1),P.domElement.removeEventListener("touchend",N,!1),P.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",O,!1),window.removeEventListener("keydown",k,!1)};var P=this,T={type:"change"},R={type:"start"},H={type:"end"},F={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},j=F.NONE,_=1e-6,V=new e.Spherical,I=new e.Spherical,U=1,B=new e.Vector3,G=!1,Z=new e.Vector2,Y=new e.Vector2,W=new e.Vector2,K=new e.Vector2,Q=new e.Vector2,q=new e.Vector2,J=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,a){t.setFromMatrixColumn(a,0),t.multiplyScalar(-e),B.add(t)}}(),ae=function(){var t=new e.Vector3;return function(e,a){t.setFromMatrixColumn(a,1),t.multiplyScalar(e),B.add(t)}}(),oe=function(){var t=new e.Vector3;return function(a,o){var n=P.domElement===document?P.domElement.body:P.domElement;if(P.object instanceof e.PerspectiveCamera){var r=P.object.position;t.copy(r).sub(P.target);var i=t.length();i*=Math.tan(P.object.fov/2*Math.PI/180),te(2*a*i/n.clientHeight,P.object.matrix),ae(2*o*i/n.clientHeight,P.object.matrix)}else P.object instanceof e.OrthographicCamera?(te(a*(P.object.right-P.object.left)/P.object.zoom/n.clientWidth,P.object.matrix),ae(o*(P.object.top-P.object.bottom)/P.object.zoom/n.clientHeight,P.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),P.enablePan=!1)}}();P.domElement.addEventListener("contextmenu",E,!1),P.domElement.addEventListener("mousedown",z,!1),P.domElement.addEventListener("wheel",S,!1),P.domElement.addEventListener("touchstart",X,!1),P.domElement.addEventListener("touchend",N,!1),P.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",k,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,r,s){var c=a.dfColors,d=o.x1col,h=o.x2col,m=o.x3col,u=n.x1frac,f=n.x2frac,p=n.x3frac,v=n.minX1,b=n.minX2,g=n.minX3,x=n.maxX1,y=n.maxX2,M=n.maxX3,w=n.normalizeX1,C=n.normalizeX2,A=n.normalizeX3,z=r.keepOldPlot,D=r.dataPointSize,O=s.xLen,S=s.yLen,k=s.zLen,X=void 0,L=void 0,N=void 0,E=void 0,P=void 0,T=void 0,R=void 0;R=l.getMinMax(t,d,e.oldData,z,v,x),E=R.min,X=R.max,R=l.getMinMax(t,h,e.oldData,z,b,y),P=R.min,L=R.max,R=l.getMinMax(t,m,e.oldData,z,g,M),T=R.min,N=R.max,w&&(v=E,x=X,E=0,X=O),C&&(b=P,y=L,P=0,L=S),A&&(g=T,M=N,T=0,N=k),u=Math.abs(x-v),0===u&&(u=1),f=Math.abs(y-b),0===f&&(f=1),0===(p=Math.abs(M-g))&&(p=1);var H=e.IsPlotmeshValid("scatterplot");z&&H||(e.disposePlotMesh(),e.plotmesh=new i.Group,e.plotmesh.name="scatterplot",e.SceneHelper.scene.add(e.plotmesh));var F=e.oldData.scatterMaterial;if(!F){var j=(new i.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAABlBMVEUAAAD///+l2Z/dAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfhChkUDA4mTwuUAAAAHWlUWHRDb21tZW50AAAAAABDcmVhdGVkIHdpdGggR0lNUGQuZQcAAACJSURBVCjPvZK7DcAgDESJUlAyAqMwGhktozACJUWEE+fQORJSlCpueJI/wnd27hHpwLuK7DcEkYqMCHJyxShBkVcoqEV1VGhoQltW6KNb+xfAhjE6iOABxSAAqkEENIMEON4gA/of8OU/8xbzprMas2IUk/Ka4LSAptAmGkcraa7ZzQPgSfBIECf/CnPyltYpaAAAAABJRU5ErkJggg==");j.needsUpdate=!0,j.magFilter=i.NearestFilter,j.minFilter=i.NearestFilter,F=new i.PointsMaterial({size:D,map:j,transparent:!0,alphaTest:.5,vertexColors:i.VertexColors,sizeAttenuation:!0}),e.oldData.scatterMaterial=F}var _=e.plotmesh,V=void 0,I=void 0,U=void 0,B=_.children[e.plotmesh.children.length-1];if(B&&B.geometry.attributes.position.realCount>=B.geometry.attributes.position.count||!B||F.size!=D){var G=15*t.length;I=new i.Float32BufferAttribute(new Float32Array(3*G),3),U=new i.Float32BufferAttribute(new Float32Array(3*G),3);for(var Z=0;Z<I.array.length;Z++)I.array[Z]=Number.MAX_SAFE_INTEGER;I.realCount=0,I.dynamic=!0,U.dynamic=!0,V=new i.BufferGeometry,F.size=D,F=F.clone(),V.addAttribute("position",I),V.addAttribute("color",U);var Y=new i.Points(V,F);Y.frustumCulled=!1,_.add(Y)}else V=_.children[_.children.length-1].geometry,U=V.attributes.color,I=V.attributes.position;for(var W=0;W<t.length;W++){var K=W+I.realCount;I.array[3*K]=t[W][d],I.array[3*K+1]=t[W][h],I.array[3*K+2]=t[W][m],U.array[3*K]=c[W].r,U.array[3*K+1]=c[W].g,U.array[3*K+2]=c[W].b}I.realCount+=t.length,V.attributes.position.needsUpdate=!0,V.attributes.color.needsUpdate=!0,e.plotmesh.scale.set(O/u,S/f,k/p),e.plotmesh.position.set(-v/u*O,-b/f*S,-g/p*k),n.minX1=v,n.maxX1=x,n.minX2=b,n.maxX2=y,n.minX3=g,n.maxX3=M,n.x1frac=u,n.x2frac=f,n.x3frac=p,e.benchmarkStamp("made a scatterplot")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(0),i=o(r),s=a(2),l=o(s)},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,r,s){var c=a.dfColors,d=o.x1col,h=o.x2col,m=o.x3col,u=n.x1frac,f=n.x2frac,p=n.x3frac,v=n.minX1,b=n.minX2,g=n.minX3,x=n.maxX1,y=n.maxX2,M=n.maxX3,w=n.normalizeX1,C=n.normalizeX2,A=n.normalizeX3,z=r.keepOldPlot,D=r.dataPointSize,O=s.xLen,S=s.yLen,k=s.zLen,X=void 0,L=void 0,N=void 0,E=void 0,P=void 0,T=void 0,R=void 0;R=l.getMinMax(t,d,e.oldData,z,v,x),E=R.min,X=R.max,R=l.getMinMax(t,h,e.oldData,z,b,y),P=R.min,L=R.max,R=l.getMinMax(t,m,e.oldData,z,g,M),T=R.min,N=R.max,w&&(v=E,x=X,E=0,X=O),C&&(b=P,y=L,P=0,L=S),A&&(g=T,M=N,T=0,N=k),u=Math.abs(x-v),0===u&&(u=1),f=Math.abs(y-b),0===f&&(f=1),0===(p=Math.abs(M-g))&&(p=1);var H=e.IsPlotmeshValid("lineplot");z&&H||(e.disposePlotMesh(),e.plotmesh=new i.Group,e.plotmesh.name="lineplot",e.SceneHelper.scene.add(e.plotmesh));var F=33*D,j=e.oldData.lineMaterial;j||(j=new i.LineBasicMaterial({vertexColors:i.VertexColors,linewidth:F,linecap:"round",linejoin:"round"}),e.oldData.lineMaterial=j);var _=e.plotmesh,V=void 0,I=void 0,U=void 0,B=_.children[e.plotmesh.children.length-1];if(B&&B.geometry.attributes.position.realCount>=B.geometry.attributes.position.count||!B||j.linewidth!=F){var G=Math.max(15*t.length,100);I=new i.Float32BufferAttribute(new Float32Array(3*G),3),U=new i.Float32BufferAttribute(new Float32Array(3*G),3);for(var Z=0;Z<I.array.length;Z+=3)I.array[Z]=void 0,I.array[Z+1]=void 0,I.array[Z+2]=void 0;I.realCount=0,I.dynamic=!0,U.dynamic=!0,V=new i.BufferGeometry,j.linewidth=F,j=j.clone(),V.addAttribute("position",I),V.addAttribute("color",U);var Y=new i.Line(V,j);Y.frustumCulled=!1,_.add(Y)}else V=_.children[_.children.length-1].geometry,U=V.attributes.color,I=V.attributes.position;for(var W=0;W<t.length;W++){var K=W+I.realCount;I.array[3*K]=t[W][d],I.array[3*K+1]=t[W][h],I.array[3*K+2]=t[W][m],U.array[3*K]=c[W].r,U.array[3*K+1]=c[W].g,U.array[3*K+2]=c[W].b}I.realCount+=t.length,V.attributes.position.needsUpdate=!0,V.attributes.color.needsUpdate=!0,e.plotmesh.scale.set(O/u,S/f,k/p),e.plotmesh.position.set(-v/u*O,-b/f*S,-g/p*k),n.minX1=v,n.maxX1=x,n.minX2=b,n.maxX2=y,n.minX3=g,n.maxX3=M,n.x1frac=u,n.x2frac=f,n.x3frac=p,e.benchmarkStamp("made a lineplot")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(0),i=o(r),s=a(2),l=o(s)},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=a.dfColors,m=a.hueOffset,u=o.x1col,f=o.x2col,p=o.x3col,v=n.normalizeX1,b=n.normalizeX2,g=n.normalizeX3,x=n.minX1,y=n.minX2,M=n.minX3,w=n.maxX1,C=n.maxX2,A=n.maxX3,z=i.keepOldPlot,D=i.barchartPadding,O=i.barSizeThreshold,S=i.labeled;if(v&&(!z||"barchart"!==e.oldData.options.mode)){var k=h.getMinMax(t,u,e.oldData,z,x,w);x=k.min,w=k.max}if(g&&(!z||"barchart"!==e.oldData.options.mode)){var X=h.getMinMax(t,p,e.oldData,z,M,A);M=X.min,A=X.max}var L=Math.abs(w-x);0===L&&(L=1);var N=Math.abs(A-M);0===N&&(N=1),1==l&&console.warn("scatterplot or polygon mode are recommended, because they are much more performant and create better looking results");var E=0,P=0;v&&(E=1/e.dimensions.xRes/2),g&&(P=1/e.dimensions.zRes/2);var T=1;1==l&&(T=0);var R=new s.BoxBufferGeometry((1-D)/e.dimensions.xRes,T,(1-D)/e.dimensions.zRes),H=new s.MeshStandardMaterial({color:0,emissive:0,emissiveIntensity:.95,roughness:1,metalness:1}),F=e.IsPlotmeshValid("barchart")&&null!==e.oldData.barsGrid&&D==e.oldData.barchartPadding,j=e.oldData.barsGrid;if(F){if(!z)for(var _ in j)for(var V in j[_])j[_][V].y=0,j[_][V].count=0}else{e.disposePlotMesh(),j={},e.oldData.barsGrid=j,e.oldData.barchartPadding=D;var I=new s.Group;I.name="barchart",e.plotmesh=I,e.SceneHelper.scene.add(I)}var U=(e.dimensions.xRes-1)/L,B=(e.dimensions.zRes-1)/N;C=e.oldData.normalization.maxX2,y=e.oldData.normalization.minX2,z||(C=0,y=0);for(var G=function(t,a,o,n,i,l){var h=(1-Math.abs(n-t))*(1-Math.abs(i-o));if(0!==h){if(j[t]||(j[t]={}),j[t][o]||(j[t][o]={},j[t][o].y=0,j[t][o].count=0),j[t][o].y+=a*h,j[t][o].y>C&&(C=j[t][o].y),j[t][o].y<y&&(y=j[t][o].y),!j[t][o].bar){var u=new s.Mesh(R.clone(),H.clone());u.position.set(t/e.dimensions.xRes+E,0,o/e.dimensions.zRes+P),u.geometry.translate(0,.5,0),e.plotmesh.add(u),j[t][o].bar=u,r(j[t][o].bar,c.convertToHeat(a,y,C,m))}if(S){var f=j[t][o].count,p=h,v=new s.Color(0).copy(d[l]),b=void 0;if(0==f)b=v;else{var g=void 0;g=j[t][o].bar.material.emissive;var x=function(e,t,a){return(e*a+t*(f+(1-a)))/(f+1)};b=new s.Color(x(v.r,g.r,p),x(v.g,g.g,p),x(v.b,g.b,p))}r(j[t][o].bar,b),j[t][o].count++}}},Z=0;Z<t.length;Z++){var Y=(t[Z][u]-x)*U,W=(t[Z][p]-M)*B,K=0|Y,Q=0|W,q=t[Z][f];if(isNaN(q))console.warn("the dataframe contained a non-number value at",Z,f,'called "',q,'". skipping that datapoint now');else if(Y!=K||W!=Q){var J=K+1,$=Q+1;G(K,q,Q,Y,W,Z),G(J,q,Q,Y,W,Z),G(K,q,$,Y,W,Z),G(J,q,$,Y,W,Z)}else G(K,q,Q,Y,W,Z)}e.plotmesh.scale.set(e.dimensions.xLen,e.dimensions.yLen,e.dimensions.zLen),O*=Math.max(Math.abs(C),Math.abs(y));var ee=1;!0===b&&(ee=Math.abs(C-y));var te=1/ee;for(var ae in j)for(var oe in j[ae]){var ne=j[ae][oe].bar,re=j[ae][oe].y;if(Math.abs(re)>O&&0!==re){if(!S&&0===e.fps15){var ie=c.convertToHeat(re,y,C,m);r(ne,ie)}re*=te,re<0?(ne.scale.set(1,-re,1),ne.position.set(ne.position.x,re,ne.position.z)):(ne.scale.set(1,re,1),ne.position.set(ne.position.x,0,ne.position.z)),ne.geometry.verticesNeedUpdate=!0}else e.SceneHelper.disposeMesh(ne),j[ae][oe].bar=null}n.minX1=x,n.maxX1=w,n.minX2=y,n.maxX2=C,n.minX3=M,n.maxX3=A,n.x1frac=L,n.x2frac=ee,n.x3frac=N}function r(e,t){e.material.emissive.set(t),e.material.color.set(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=a(0),s=o(i),l=a(1),c=o(l),d=a(2),h=o(d)},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,r){var s=a.hueOffset,c=r.xLen,d=r.yLen,h=r.zLen,m=r.xRes,u=r.zRes,f=o.normalizeX2,p=o.x2frac,v=n.numberDensity,b=t.plotmesh;if(!t.IsPlotmeshValid("polygonFormula")){t.disposePlotMesh();var g=new i.PlaneGeometry(c,h,m,u);g.rotateX(Math.PI/2),g.translate(c/2,0,h/2);for(var x=[new i.MeshStandardMaterial({side:i.DoubleSide,vertexColors:i.VertexColors,roughness:.85}),new i.MeshBasicMaterial({transparent:!0,opacity:0})],y=0;y<g.faces.length;y++){var M=g.faces[y].vertexColors;M[0]=new i.Color(0),M[1]=new i.Color(0),M[2]=new i.Color(0)}b=new i.Mesh(g,x),b.frustumCulled=!1,t.plotmesh=b,t.plotmesh.name="polygonFormula"}for(var w=0,C=void 0,A=0;A<b.geometry.vertices.length;A++){var z=b.geometry.vertices[A];if(C=e(z.x,z.z),isFinite(C))break}for(var D=1/0,O=-1/0,S=0;S<b.geometry.vertices.length;S++){var k=b.geometry.vertices[S];w=e(k.x,k.z),isFinite(w)||(w=C),b.geometry.colors[S]=new i.Color(6684927),!isNaN(w)&&Math.abs(w)!=Number.POSITIVE_INFINITY&&k&&(O=Math.max(w,O),D=Math.min(w,D),k.y=w)}var X=O+.15*(O-D),L=D-.15*(O-D);f?(p=Math.abs(O-D)/r.yLen,b.scale.set(1,1/p,1),b.position.y=-D/p):(b.scale.set(1,1,1),b.position.y=0,D=0,O=d);var N=function(e){var t=b.geometry.vertices[e].y;return l.convertToHeat(t,L,X,s)};if(0===t.fps15){for(var E=0;E<b.geometry.faces.length;E++){var P=b.geometry.faces[E];P.vertexColors[0].set(N(P.a)),P.vertexColors[1].set(N(P.b)),P.vertexColors[2].set(N(P.c))}t.SceneHelper.updateNumbersAlongAxis(v,c,1,0,c),t.SceneHelper.updateNumbersAlongAxis(v,d,2,D,O),t.SceneHelper.updateNumbersAlongAxis(v,h,3,0,h)}b.name="polygonFormula",t.SceneHelper.scene.add(t.plotmesh),b.geometry.computeFaceNormals(),b.geometry.computeVertexNormals(),b.geometry.__dirtyNormals=!0,b.geometry.verticesNeedUpdate=!0,b.geometry.colorsNeedUpdate=!0,b.material.needsUpdate=!0,t.SceneHelper.makeSureItRenders(t.animationFunc),o.minX2=D,o.maxX2=O}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(0),i=o(r),s=a(1),l=o(s)},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,r,s){var c=o.x1col,h=o.x2col,m=o.x3col,u=a.hueOffset,f=n.x1frac,p=n.x2frac,v=n.x3frac,b=n.minX1,g=n.minX2,x=n.minX3,y=n.maxX1,M=n.maxX2,w=n.maxX3,C=s.xLen,A=s.yLen,z=s.zLen,D=s.xRes,O=s.zRes,S=void 0;S=l.getMinMax(t,c,e.oldData,!1,b,y),b=S.min,y=S.max,S=l.getMinMax(t,h,e.oldData,!1,g,M),g=S.min,M=S.max,S=l.getMinMax(t,m,e.oldData,!1,x,w),x=S.min,w=S.max,f=Math.abs(y-b),0===f&&(f=1),p=Math.abs(M-g),0===p&&(p=1),v=Math.abs(w-x),0===v&&(v=1),e.disposePlotMesh();var k=new i.PlaneGeometry(C,z,D,O);k.rotateX(Math.PI/2),k.translate(C/2,0,z/2);for(var X=new i.MeshStandardMaterial({side:i.DoubleSide,vertexColors:i.VertexColors,roughness:.85}),L=0;L<k.faces.length;L++){var N=k.faces[L].vertexColors;N[0]=new i.Color(0),N[1]=new i.Color(0),N[2]=new i.Color(0)}var E=new i.Mesh(k,X);E.frustumCulled=!1,e.plotmesh=E,e.plotmesh.name="selforganizingmap",e.SceneHelper.scene.add(e.plotmesh);for(var P=k.vertices,T=void 0,R=void 0,H=void 0,F=void 0,j=void 0,_=void 0,V=void 0,I=void 0,U=void 0,B=void 0,G=void 0,Z=0;Z<80;Z++)for(var Y=0;Y<t.length;Y++){U=(t[Y][c]-b)*C/f,B=(t[Y][h]-g)*A/p,G=(t[Y][m]-x)*z/v,T=(z-G)*D*O/z+U*D/C|0,R=P[T],H=1/0;for(var W=T;W<P.length;W++){if(F=R.x-U,j=R.z-G,Math.abs(F)<C/D&&Math.abs(j)<z/O){V=R;break}R=P[W],_=Math.pow(F,2)+Math.pow(j,2),_<H&&(V=R,H=_)}for(var K=0;K<P.length;K++)I=P[K],F=I.x-V.x,j=I.z-V.z,_=Math.pow(F,2)+Math.pow(j,2),I.y=I.y+function(e,t){return Math.max(0,-(t/2+1)*e+1)}(_,Z)*function(e){return 4/(e+4)}(Z)*(B-I.y)}for(var Q=A,q=function(e){var t=E.geometry.vertices[e].y;return d.convertToHeat(t,0,Q,u)},J=0;J<E.geometry.faces.length;J++){var $=E.geometry.faces[J];$.vertexColors[0].set(q($.a)),$.vertexColors[1].set(q($.b)),$.vertexColors[2].set(q($.c))}E.geometry.computeFaceNormals(),E.geometry.computeVertexNormals(),E.geometry.__dirtyNormals=!0,E.geometry.verticesNeedUpdate=!0,E.geometry.colorsNeedUpdate=!0,E.material.needsUpdate=!0,e.SceneHelper.makeSureItRenders(e.animationFunc),n.minX1=b,n.maxX1=y,n.minX2=g,n.maxX2=M,n.minX3=x,n.maxX3=w,n.x1frac=f,n.x2frac=p,n.x3frac=v,e.benchmarkStamp("calculated a self organizing map")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(0),i=o(r),s=a(2),l=o(s),c=a(1),d=o(c)},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e,t,a,o,n,r,s){var c=o.x1col,h=o.x2col,m=o.x3col,u=a.hueOffset,f=n.x1frac,p=n.x2frac,v=n.x3frac,b=1/0,g=1/0,x=1/0,y=-1/0,M=-1/0,w=-1/0,C=n.normalizeX2,A=s.xLen,z=s.zLen,D=s.xRes,O=s.zRes,S=void 0;S=l.getMinMax(t,c,e.oldData,!1,b,y),b=S.min,y=S.max,S=l.getMinMax(t,h,e.oldData,!1,g,M),g=S.min,M=S.max,S=l.getMinMax(t,m,e.oldData,!1,x,w),x=S.min,w=S.max,f=Math.abs(y-b),0===f&&(f=1),p=Math.abs(M-g),0===p&&(p=1),v=Math.abs(w-x),0===v&&(v=1),e.disposePlotMesh();var k=new i.PlaneGeometry(A,z,D,O),X=D-1+2,L=O-1+2;k.rotateX(Math.PI/2),k.scale(1,1,-1),k.translate(A/2,0,z/2);for(var N=new i.MeshStandardMaterial({side:i.DoubleSide,vertexColors:i.VertexColors,roughness:.85}),E=0;E<k.faces.length;E++){var P=k.faces[E].vertexColors;P[0]=new i.Color(0),P[1]=new i.Color(0),P[2]=new i.Color(0)}var T=new i.Mesh(k,N);T.frustumCulled=!1,e.plotmesh=T,e.plotmesh.name="selforganizingmap",e.SceneHelper.scene.add(e.plotmesh);for(var R=new Array(X),H=0,F=0;F<X;F++){R[F]=new Array(L);for(var j=0;j<L;j++)R[F][j]=k.vertices[H],H++}var _=new Array(X),V=new Array(X),I=void 0,U=void 0,B=void 0;for(U=0;U<X;U++)_[U]=new Array(L),V[U]=new Uint16Array(L);for(H=0;H<t.length;H++)I=t[H],U=(I[c]-b)/f*D|0,B=(I[m]-x)/v*O|0,isNaN(_[U][B])?(_[U][B]=I[h],V[U][B]=1):(_[U][B]*=V[U][B],_[U][B]+=I[h],V[U][B]++,_[U][B]/=V[U][B]);var G=void 0,Z=void 0,Y=void 0,W=void 0,K=void 0,Q=void 0,q=void 0,J=void 0,$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!isNaN(_[e.x][e.y]))return!1;for(Y=e.clone().add(new i.Vector2(0,1)),W=e.clone().add(new i.Vector2(0,-1));Y.y<_[0].length&&isNaN(_[Y.x][Y.y]);)Y.add(new i.Vector2(0,1));for(;W.y>=0&&isNaN(_[W.x][W.y]);)W.add(new i.Vector2(0,-1));for(G=e.clone().add(new i.Vector2(1,0)),Z=e.clone().add(new i.Vector2(-1,0));G.x<_.length&&isNaN(_[G.x][G.y]);)G.add(new i.Vector2(1,0));for(;Z.x>=0&&isNaN(_[Z.x][Z.y]);)Z.add(new i.Vector2(-1,0));0===t?(G.x<_.length&&Z.x>=0||(G=null,Z=null),Y.y<_[0].length&&W.y>=0||(Y=null,W=null)):(G.x<_.length||(G=null),Z.x>=0||(Z=null),Y.y<_[0].length||(Y=null),W.y>=0||(W=null)),K=[G,Z,Y,W],Q=0,q=0;for(var a=0;a<K.length;a++)null!==K[a]&&(J=e.distanceTo(K[a]),Q+=1/J,q+=_[K[a].x][K[a].y]*(1/e.distanceTo(K[a])));return 0!==Q&&(q/=Q,_[e.x][e.y]=q,!0)},ee=new Array(X*L),te=0;for(U=0;U<_.length;U++)for(B=0;B<_[0].length;B++)isNaN(_[U][B])&&(ee[te]={x:U,z:B},te++);var ae=te-1,oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=void 0,a=void 0;for(t=0,a=D*O*2;te>0&&a-- >0;){for(;t<ae&&void 0===ee[t];t++);void 0!==ee[t]?(U=ee[t].x,B=ee[t].z,$(new i.Vector2(U,B),e)&&(ee[t]=void 0,te--),++t>ae&&(t=0)):t=0}};oe(0),oe(1),H=0;for(var ne=0;ne<_[0].length;ne++)for(var re=0;re<_.length;re++)void 0!==_[re][ne]?T.geometry.vertices[H].y=_[re][ne]:T.geometry.vertices[H].y=g-1,H++;C&&(p=Math.abs(M-g)/s.yLen,T.scale.set(1,1/p,1),T.position.y=-g/p);for(var ie=M+.1*(M-g),se=g-.1*(M-g),le=function(e){var t=T.geometry.vertices[e].y;return d.convertToHeat(t,se,ie,u)},ce=0;ce<T.geometry.faces.length;ce++){var de=T.geometry.faces[ce];de.vertexColors[0].set(le(de.a)),de.vertexColors[1].set(le(de.b)),de.vertexColors[2].set(le(de.c))}T.geometry.computeFaceNormals(),T.geometry.computeVertexNormals(),T.geometry.__dirtyNormals=!0,T.geometry.verticesNeedUpdate=!0,T.geometry.colorsNeedUpdate=!0,T.material.needsUpdate=!0,e.SceneHelper.makeSureItRenders(e.animationFunc),n.minX1=b,n.maxX1=y,n.minX2=g,n.maxX2=M,n.minX3=x,n.maxX3=w,n.x1frac=f,n.x2frac=p,n.x3frac=v,e.benchmarkStamp("made a polygon")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=a(0),i=o(r),s=a(2),l=o(s),c=a(1),d=o(c)}]);